plugin_register language_model/knn
[[0,0.0,0.0],true]
table_create Data TABLE_NO_KEY
[[0,0.0,0.0],true]
column_create Data text COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
column_create Data rabitq_code COLUMN_SCALAR ShortBinary
[[0,0.0,0.0],true]
load --table Data
[
{"text": "I am a boy."},
{"text": "This is an apple."},
{"text": "Groonga is a full text search engine."},
{"text": "This is an orange."},
{"text": "This is a banana."},
{"text": "This is a tomato."},
{"text": "This is a carrot."},
{"text": "This is a cucumber."},
{"text": "This is a pepper."},
{"text": "This is a potato."},
{"text": "This is a onion."}
]
[[0,0.0,0.0],11]
table_create RaBitQ TABLE_HASH_KEY ShortBinary   --default_tokenizer 'TokenLanguageModelKNN("model", "hf:///groonga/multilingual-e5-base-Q4_K_M-GGUF",                                              "code_column", "rabitq_code")'
[[0,0.0,0.0],true]
column_create RaBitQ data_text COLUMN_INDEX Data text
[[0,0.0,0.0],true]
#|w| load: model vocab missing newline token, using special_pad_id instead
#|w| load: special_eos_id is not in special_eog_ids - the tokenizer config may be incorrect
select Data   --filter 'language_model_knn(text, "male child", { "k" : -3 })'   --output_columns text
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        9
      ],
      [
        [
          "text",
          "ShortText"
        ]
      ],
      [
        "I am a boy."
      ],
      [
        "This is a cucumber."
      ],
      [
        "This is a pepper."
      ],
      [
        "This is an orange."
      ],
      [
        "This is a potato."
      ],
      [
        "This is a carrot."
      ],
      [
        "This is a banana."
      ],
      [
        "This is an apple."
      ],
      [
        "This is a tomato."
      ]
    ]
  ]
]
