table_create Patents TABLE_HASH_KEY ShortText
column_create Patents app_date COLUMN_SCALAR Time
column_create Patents priority_date COLUMN_SCALAR Time

table_create Dates TABLE_PAT_KEY Time

load --table Patents
[
{"_key": "JP20010123456", "app_date": "2001-01-01 00:00:00", "priority_date": "2000-12-01 00:00:00"},
{"_key": "JP20000123456", "app_date": "2000-12-11 00:00:00", "priority_date": "2099-12-31 00:00:00"}
]

column_create Dates earliest_date COLUMN_INDEX|WITH_EXPRESSION \
  Patents app_date,priority_date \
  --expression 'min(app_date,priority_date)'

select Patents \
  --filter 'Dates.earliest_date > "2000-12-10 00:00:00"' \
  --output_columns _id,_key,app_date,priority_date
