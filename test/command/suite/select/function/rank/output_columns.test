plugin_register functions/rank

table_create Prices TABLE_PAT_KEY Int32

load --table Prices
[
{"_key": -201},
{"_key": -200},
{"_key": -199},
{"_key": -101},
{"_key": -100},
{"_key": -99},
{"_key": -1},
{"_key": 0},
{"_key": 1},
{"_key": 99},
{"_key": 100},
{"_key": 101},
{"_key": 199},
{"_key": 200},
{"_key": 201}
]

select Prices \
  --filter '_key > 0' \
  --sortby -_id \
  --limit -1 \
  --output_columns '_id, _key, rank()'
