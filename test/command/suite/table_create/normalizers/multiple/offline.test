table_create Memos TABLE_NO_KEY
column_create Memos content COLUMN_SCALAR Text

load --table Memos
[
{"content": "リンゴ"},
{"content": "りんご"}
]

table_create Substitutions TABLE_PAT_KEY ShortText
column_create Substitutions substituted COLUMN_SCALAR ShortText

load --table Substitutions
[
{"_key": "ご", "substituted": "こ"}
]

table_create Terms TABLE_PAT_KEY ShortText \
  --default_tokenizer TokenBigram \
  --normalizers 'NormalizerNFKC130("unify_kana", true), \
                 NormalizerTable("column", "Substitutions.substituted")'
column_create Terms memos_content COLUMN_INDEX|WITH_POSITION Memos content

select Terms --output_columns _key --limit -1

select Memos --match_columns content --query りんこ
