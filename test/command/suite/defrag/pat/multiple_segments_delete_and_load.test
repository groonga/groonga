table_create --name PatTable --flags TABLE_PAT_KEY --key_type ShortText

#@timeout 30
#@disable-logging
#@generate-series 0 10000 PatTable '{"_key" => "N%08d" % i}'
load --table PatTable
[
{"_key":"Jeff"},
{"_key":"John"}
]
#@generate-series 10000 800000 PatTable '{"_key" => "N%08d" % i}'
load --table PatTable
[
{"_key":"Joi"},
{"_key":"Jay"}
]
#@enable-logging
#@timeout default

delete PatTable --filter '_id > 100 && _id < 199'
delete PatTable --filter '_id > 699990 && _id < 700000'

defrag
object_inspect PatTable
select PatTable --filter '_id == 200'
select PatTable --filter '_id == 700000'

### Additional load and defragmentation.
#@timeout 30
#@disable-logging
#@generate-series 900000 999999 PatTable '{"_key" => "N%08d" % i}'
load --table PatTable
[
{"_key":"Foo"}
]
#@enable-logging
#@timeout default

defrag
object_inspect PatTable
select PatTable --filter '_id == 200'
select PatTable --filter '_id == 900000'
