.. -*- rst -*-

このフラグは圧縮前にデータをフィルタリングすることで
``COMPRESS_ZLIB`` / ``COMPRESS_LZ4`` / ``COMPRESS_ZSTD`` の圧縮率を高めるためのフラグです。

ただし、データによって効果があることもあれば効果がないこともあります。圧縮率が下がることもありえます。
また、このフラグを有効にすることで追加の処理が入るのでカラムの保存・参照処理は確実に遅くなります。
データに合わせて効果があるフィルターだけ有効にすることが重要です。

なお、 ``COMPRESS_ZLIB`` / ``COMPRESS_LZ4`` / ``COMPRESS_ZSTD`` を指定しない場合は
`BloscLZ <https://www.blosc.org/pages/blosc-in-depth/#blosc-as-a-meta-compressor>`_ という圧縮アルゴリズムが使われるので、
このフラグを有効にすることでほとんどの場合は未圧縮の場合よりもサイズが小さくなります。
しかし、データによってはこのフラグを有効にせずに単に ``COMPRESS_ZLIB`` / ``COMPRESS_LZ4`` / ``COMPRESS_ZSTD`` を指定するだけで
十分であることもあるため、実際のデータにあわせて適切にフラグを設定するようにしてください。

``COMPRESS_FILTER_SHUFFLE`` フラグはBloscサポートが有効になっていないと無視されることに注意してください。
各種パッケージでは有効になっていますが、自分でビルドするときは明示的に有効にする必要があります。
自分でビルドする場合は :doc:`/install/others` を参照してください。

このフラグは ``COLUMN_VECTOR`` でのみ使用できます。 ``COLUMN_SCALAR`` のときはこのフラグは無視されます。
